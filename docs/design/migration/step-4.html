<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Libero — Migration : Import en cours</title>
  <link rel="stylesheet" href="../shared/tokens.css">
  <link rel="stylesheet" href="../shared/base.css">
  <style>
    .migration-layout {
      min-height: 100vh;
      background: var(--color-bg);
      padding: var(--space-8) var(--space-6);
    }
    .migration-topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 860px;
      margin: 0 auto var(--space-6);
    }
    .migration-logo {
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }
    .migration-step-counter {
      font-size: var(--text-sm);
      font-weight: var(--weight-medium);
      color: var(--color-text-secondary);
    }
    .migration-container {
      max-width: 860px;
      margin: 0 auto;
    }
    .migration-header {
      text-align: center;
      margin-bottom: var(--space-4);
    }
    .migration-title {
      font-family: var(--font-heading);
      font-size: var(--text-2xl);
      margin-bottom: var(--space-2);
    }
    .migration-subtitle {
      font-size: var(--text-sm);
      color: var(--color-text-secondary);
    }

    /* Main progress */
    .main-progress {
      margin-bottom: var(--space-8);
    }
    .main-progress-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-3);
    }
    .main-progress-pct {
      font-family: var(--font-mono);
      font-size: var(--text-2xl);
      font-weight: var(--weight-bold);
      color: var(--color-primary-dark);
    }
    .main-progress-eta {
      font-size: var(--text-sm);
      color: var(--color-text-secondary);
    }
    .main-progress .progress {
      height: 12px;
    }

    /* Sub-progress items */
    .sub-progress-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
      margin-bottom: var(--space-8);
    }
    .sub-progress-item {
      display: grid;
      grid-template-columns: 200px 1fr 80px;
      gap: var(--space-4);
      align-items: center;
    }
    .sub-progress-label {
      font-size: var(--text-sm);
      font-weight: var(--weight-medium);
      color: var(--color-text);
    }
    .sub-progress-bar {
      position: relative;
    }
    .sub-progress-bar .progress {
      height: 8px;
    }
    .sub-progress-count {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      color: var(--color-text-secondary);
      text-align: right;
      white-space: nowrap;
    }

    /* Live log */
    .live-log {
      background: var(--color-neutral-100);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--space-4);
      height: 200px;
      overflow-y: auto;
      margin-bottom: var(--space-6);
    }
    .live-log-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-3);
    }
    .live-log-title {
      font-size: var(--text-xs);
      font-weight: var(--weight-semi);
      text-transform: uppercase;
      letter-spacing: var(--tracking-wide);
      color: var(--color-text-secondary);
    }
    .live-log-dot {
      width: 6px;
      height: 6px;
      border-radius: var(--radius-full);
      background: var(--color-primary);
      animation: pulse 1.5s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    .log-line {
      font-family: var(--font-mono);
      font-size: var(--text-xs);
      line-height: 1.8;
      color: var(--color-text-secondary);
    }
    .log-line .log-time { color: var(--color-text-muted); }
    .log-line .log-ok { color: var(--color-primary); }
    .log-line .log-warn { color: var(--color-amber); }

    /* Footer actions */
    .import-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .bg-link {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      cursor: pointer;
    }
    .bg-link:hover { color: var(--color-text-secondary); text-decoration: underline; }
  </style>
</head>
<body>
  <div class="migration-layout">
    <div class="migration-container">

      <!-- Top bar -->
      <div class="migration-topbar">
        <div class="migration-logo">
          <div class="auth-logo-mark">L</div>
          <span class="auth-logo-text">Libero</span>
        </div>
        <span class="migration-step-counter">4 / 5</span>
      </div>

      <!-- Wizard Progress: Step 4 of 5 -->
      <div class="wizard-progress">
        <div class="wizard-step completed">
          <div class="wizard-step-dot">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <span class="wizard-step-label">Source</span>
        </div>
        <div class="wizard-step-connector completed"></div>
        <div class="wizard-step completed">
          <div class="wizard-step-dot">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <span class="wizard-step-label">Mapping</span>
        </div>
        <div class="wizard-step-connector completed"></div>
        <div class="wizard-step completed">
          <div class="wizard-step-dot">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          </div>
          <span class="wizard-step-label">Validation</span>
        </div>
        <div class="wizard-step-connector completed"></div>
        <div class="wizard-step active">
          <div class="wizard-step-dot">4</div>
          <span class="wizard-step-label">Import</span>
        </div>
        <div class="wizard-step-connector"></div>
        <div class="wizard-step">
          <div class="wizard-step-dot">5</div>
          <span class="wizard-step-label">Termine</span>
        </div>
      </div>

      <!-- Header -->
      <div class="migration-header">
        <h1 class="migration-title">Migration en cours...</h1>
        <p class="migration-subtitle">Vos donnees sont en cours de transfert depuis Salesforce NPSP vers Libero.</p>
      </div>

      <!-- Main card -->
      <div class="card" style="padding: var(--space-8);">

        <!-- Main progress bar -->
        <div class="main-progress">
          <div class="main-progress-header">
            <span class="main-progress-pct">67%</span>
            <span class="main-progress-eta">Temps restant estime : ~4 min</span>
          </div>
          <div class="progress">
            <div class="progress-fill" style="width: 67%;"></div>
          </div>
        </div>

        <!-- Sub-progress by object type -->
        <div class="sub-progress-list">
          <div class="sub-progress-item">
            <span class="sub-progress-label">Constituants individuels</span>
            <div class="sub-progress-bar">
              <div class="progress">
                <div class="progress-fill" style="width: 71%;"></div>
              </div>
            </div>
            <span class="sub-progress-count">847 / 1 189</span>
          </div>
          <div class="sub-progress-item">
            <span class="sub-progress-label">Organisations</span>
            <div class="sub-progress-bar">
              <div class="progress">
                <div class="progress-fill" style="width: 74%;"></div>
              </div>
            </div>
            <span class="sub-progress-count">43 / 58</span>
          </div>
          <div class="sub-progress-item">
            <span class="sub-progress-label">Dons</span>
            <div class="sub-progress-bar">
              <div class="progress">
                <div class="progress-fill" style="width: 60%;"></div>
              </div>
            </div>
            <span class="sub-progress-count">2 341 / 3 892</span>
          </div>
          <div class="sub-progress-item">
            <span class="sub-progress-label">Campagnes</span>
            <div class="sub-progress-bar">
              <div class="progress">
                <div class="progress-fill" style="width: 80%;"></div>
              </div>
            </div>
            <span class="sub-progress-count">12 / 15</span>
          </div>
        </div>

        <!-- Live log stream -->
        <div class="live-log">
          <div class="live-log-header">
            <span class="live-log-title">Journal en direct</span>
            <div class="live-log-dot"></div>
          </div>
          <div class="log-line"><span class="log-time">[12:34:01]</span> <span class="log-ok">&#10003;</span> Importe : Jean Dupont <span style="color: var(--color-text-muted);">(contact_id: C001247)</span></div>
          <div class="log-line"><span class="log-time">[12:34:01]</span> <span class="log-ok">&#10003;</span> Importe : Association Medecins du Monde <span style="color: var(--color-text-muted);">(org_id: O000312)</span></div>
          <div class="log-line"><span class="log-time">[12:34:02]</span> <span class="log-warn">&#9888;</span> Doublon ignore : Marie Martin <span style="color: var(--color-text-muted);">(email deja existant)</span></div>
          <div class="log-line"><span class="log-time">[12:34:02]</span> <span class="log-ok">&#10003;</span> Don importe : 250&#8364; — Jean Dupont <span style="color: var(--color-text-muted);">(don_id: D008432)</span></div>
          <div class="log-line"><span class="log-time">[12:34:03]</span> <span class="log-ok">&#10003;</span> Importe : Sophie Bernard <span style="color: var(--color-text-muted);">(contact_id: C001248)</span></div>
          <div class="log-line"><span class="log-time">[12:34:03]</span> <span class="log-ok">&#10003;</span> Don importe : 100&#8364; — Sophie Bernard <span style="color: var(--color-text-muted);">(don_id: D008433)</span></div>
          <div class="log-line"><span class="log-time">[12:34:04]</span> <span class="log-ok">&#10003;</span> Campagne importee : Noel 2024 <span style="color: var(--color-text-muted);">(campaign_id: CAM012)</span></div>
          <div class="log-line"><span class="log-time">[12:34:04]</span> <span class="log-warn">&#9888;</span> Doublon ignore : Pierre Durand <span style="color: var(--color-text-muted);">(email deja existant)</span></div>
          <div class="log-line"><span class="log-time">[12:34:05]</span> <span class="log-ok">&#10003;</span> Importe : Fondation Agir Ensemble <span style="color: var(--color-text-muted);">(org_id: O000313)</span></div>
        </div>

        <!-- Footer -->
        <div class="import-footer">
          <span class="bg-link">Continuer en arriere-plan</span>
          <button class="btn btn-secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
            Mettre en pause
          </button>
        </div>

      </div>

    </div>
  </div>
</body>
</html>
